## BIO 与 NIO

BIO（Blocking IO）阻塞式IO模型。

NIO（Noblocking IO）非阻塞式IO模型。


基于不同的IO模型，有不同的网络通信框架，性能和应用场景也不一样。

比较著名的Netty就是基于NIO模型实现的。

Android原生也提供了NIO接口。

Android NIO主要分为三大类，ByteBuffer、FileChannel和SocketChannel。

### NIO适用场景

NIO和单线程模型？

NIO是非阻塞的IO模型，单线程是线程模型。所以将NIO当作单线程网络模型是不合适的。也有多线程的NIO网络模型。也就是netty中的`Reactor多线程模型`。Rector多线程模型与单线程模型最大的区别就是有一组NIO线程处理IO操作。

对于一些小容量应用场景，可以使用单线程模型。但是对于高负载、大并发的应用却不合适，主要原因如下：

1) 一个NIO线程同时处理成百上千的链路，性能上无法支撑，即便NIO线程的CPU负荷达到100%，也无法满足海量消息的编码、解码、读取和发送；

2) 当NIO线程**负载过重**之后，处理速度将变慢，这会导致大量客户端连接超时，超时之后往往会进行重发，这更加重了NIO线程的负载，最终会导致大量消息积压和处理超时，NIO线程会成为系统的性能瓶颈；

3) 可靠性问题：一旦NIO线程意外跑飞，或者进入死循环，会导致整个系统通信模块不可用，不能接收和处理外部消息，造成节点故障。


#### 为什么android开发用中用nio的非常少？

1.nio bug存在太多.性能不佳.比如某个空轮询的bug,会导致cpu报废
2.使用困难,开发者不能很快的上手io,并且需要很长一段时间来熟悉,api提供太过繁杂.需要掌握大量api才可以开发出一款良好的nio应用.
3.可靠性差,经常会出现断线,异常,半包等情况;
4.开发工作量非常大;5.
存在mina、netty这样第三方完善的类库的来代替nio.netty可以说比nio更加成熟.其是基于nio之上的,并且解决了nio的bug.使用十分方便.基本完胜nio.

<https://www.zhihu.com/question/25713689/answer/37442867>
