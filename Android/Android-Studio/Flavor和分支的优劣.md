## Android Flavor和分支的优劣

开分支具有两面性，每开一个分支，开发就多了一份维护工作量；但同样的，不同客户、平台之间的耦合可以被隔离，可以一定程度的分摊风险。所以针对分支是否开通需要有讨论，依据状态权衡利弊。


我们遇到的问题：
1. 新增功能或修复Bug，需要同步到510 5508甚至cvtouch分支



使用flavor后：
1. 新增功能或修复Bug过程，可能会影响其它版本。（无可避免，如果合并到分支也会出现，解决办法是，新增功能如果只针对某个平台，先发对应的版本，旧平台不发布，直到充分测试后）
2. 对现有功能的修改，会影响旧功能（解决：同样，其它平台或定制不发布新版本，直到充分测试）
3. 每次改动测试需要进行整体测试？这个和多分支一样，同样需要区分是整体测试还是部分功能测试，只是使用flavor相对分支来说，好像经常要整体测试，这也是不正确的。如果修改了局部部分，其它flavor完全不需要测试）

所以，分支应该只用于分布式开发，而不是用于逻辑或功能划分上，无论多分支还是一个分支。分支在合并功能时会不会有优势，直接使用merge。

### Flavor和Branch

小差异，或者大差异，都可以使用Flavor，可以避免bugfix合并。但无法解决测试版和发布版的问题。

即使使用了Flavor，分支还是必不可少的。

分支是并发编程时所必须的，版本管理器。Flavor不具备历史版本管理的功能。所以，当多个新功能并发，或者新功能和线上紧急修bug同时进行，就需要分支来管理。

### Flavor的缺点

修复了某个Flavor的Bug，会影响到整个项目的git log历史。所以整个仓库的log，是混合了各个版本，穿插了各个版本的功能或Bugfix。这就要求，写log commit时，必须要将Flavor写上，以便从日志可以跟踪，某个Flavor的修改记录。
